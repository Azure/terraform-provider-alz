---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "alz_archetype Data Source - terraform-provider-alz"
subcategory: ""
description: |-
  Archetype data source. This provides data in order to create resources. Where possible, the data is provided in the form of ARM JSON.
---

# alz_archetype (Data Source)

Archetype data source. This provides data in order to create resources. Where possible, the data is provided in the form of ARM JSON.

## Example Usage

```terraform
data "azurerm_client_config" "current" {}

data "alz_archetype" "example" {
  defaults = {
    location = "westeurope"
  }
  id                        = "alz-root"
  base_archetype            = "root"
  display_name              = "alz-root"
  parent_id                 = data.azurerm_client_config.current.tenant_id
  policy_definitions_to_add = ["MyPolicyDefinition"]
  policy_assignments_to_add = ["MyPolicyAssignment"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `base_archetype` (String) The base archetype name to use. This has been generated from the provider lib directories.
- `defaults` (Attributes) Archetype default values (see [below for nested schema](#nestedatt--defaults))
- `id` (String) The management group name, forming part of the resource id.
- `parent_id` (String) The parent management group name.

### Optional

- `display_name` (String) The display name of the management group.
- `policy_assignments_to_modify` (Attributes Map) A map of policy assignments names to change in the archetype. The map key is the policy assignment name.The policy assignment **must** exist in the archetype.The nested attributes will be merged with the existing policy assignment so you do not need to re-declare everything. (see [below for nested schema](#nestedatt--policy_assignments_to_modify))

### Read-Only

- `alz_policy_assignments` (Map of String) A map of generated policy assignments. The values are ARM JSON policy assignments.
- `alz_policy_definitions` (Map of String) A map of generated policy assignments. The values are ARM JSON policy definitions.
- `alz_policy_role_assignments` (Attributes Map) A map of role assignments generated from the policy assignments. The values are a nested object containing the role definition ids and any additionl scopes. (see [below for nested schema](#nestedatt--alz_policy_role_assignments))
- `alz_policy_set_definitions` (Map of String) A map of generated policy assignments. The values are ARM JSON policy set definitions.
- `alz_role_definitions` (Map of String) A map of generated role assignments. The values are ARM JSON role definitions.

<a id="nestedatt--defaults"></a>
### Nested Schema for `defaults`

Required:

- `location` (String) Default location

Optional:

- `log_analytics_workspace_id` (String) Default Log Analytics workspace id
- `private_dns_zone_resource_group_id` (String) Resource group resource id containing private DNS zones. Used in the Deploy-Private-DNS-Zones assignment.


<a id="nestedatt--policy_assignments_to_modify"></a>
### Nested Schema for `policy_assignments_to_modify`

Optional:

- `enforcement_mode` (String) The enforcement mode of the policy assignment. Must be one of `Default`, or `DoNotEnforce`.
- `identity` (String) The identity type. Must be one of `SystemAssigned` or `UserAssigned`.
- `identity_ids` (Set of String) A list of zero or one identity ids to assign to the policy assignment. Required if `identity` is `UserAssigned`.
- `non_compliance_message` (Attributes Set) The non-compliance messages to use for the policy assignment. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--non_compliance_message))
- `overrides` (Attributes List) The overrides for this policy assignment. There are a maximum of 10 overrides allowed per assignment. If specified here the overrides will replace the existing overrides.The overrides are processed in the order they are specified. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--overrides))
- `parameters` (String) The parameters to use for the policy assignment. **Note:** This is a JSON string, and not a map. This is because the parameter values have different types, which confuses the type system used by the provider sdk. Use `jsonencode()` to construct the map. The map keys must be strings, the values are `any` type.

Example: `jsonencode({"param1": "value1", "param2": 2})`
- `resource_selectors` (Attributes List) The resource selectors to use for the policy assignment. A maximum of 10 resource selectors are allowed per assignment. If specified here the resource selectors will replace the existing resource selectors. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--resource_selectors))

<a id="nestedatt--policy_assignments_to_modify--non_compliance_message"></a>
### Nested Schema for `policy_assignments_to_modify.non_compliance_message`

Required:

- `message` (String) The non-compliance message.

Optional:

- `policy_definition_reference_id` (String) The policy definition reference id (not the resource id) to use for the non compliance message. This references the definition within the policy set.


<a id="nestedatt--policy_assignments_to_modify--overrides"></a>
### Nested Schema for `policy_assignments_to_modify.overrides`

Required:

- `kind` (String) The property the assignment will override. The supported kind is `policyEffect`.
- `value` (String) The new value which will override the existing value. The supported values are: `addToNetworkGroup`, `append`, `audit`, `auditIfNotExists`, `deny`, `denyAction`, `deployIfNotExists`, `disabled`, `manual`, `modify`, `mutate`.

<https://learn.microsoft.com/azure/governance/policy/concepts/effects>

Optional:

- `selectors` (Attributes List) The selectors to use for the override. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--overrides--selectors))

<a id="nestedatt--policy_assignments_to_modify--overrides--selectors"></a>
### Nested Schema for `policy_assignments_to_modify.overrides.selectors`

Required:

- `kind` (String) The property of a selector that describes what characteristic will narrow down the scope of the override. Allowed value for kind: `policyEffect` is: `policyDefinitionReferenceId`.

Optional:

- `in` (Set of String) The list of values that the selector will match. The values are the policy definition reference ids. Conflicts with `not_in`.
- `not_in` (Set of String) The list of values that the selector will not match. The values are the policy definition reference ids. Conflicts with `in`.



<a id="nestedatt--policy_assignments_to_modify--resource_selectors"></a>
### Nested Schema for `policy_assignments_to_modify.resource_selectors`

Required:

- `name` (String) The name of the resource selector. The name must be unique within the assignment.

Optional:

- `selectors` (Attributes List) The selectors to use for the resource selector. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--resource_selectors--selectors))

<a id="nestedatt--policy_assignments_to_modify--resource_selectors--selectors"></a>
### Nested Schema for `policy_assignments_to_modify.resource_selectors.selectors`

Required:

- `kind` (String) The property of a selector that describes what characteristic will narrow down the set of evaluated resources. Each kind can only be used once in a single resource selector. Allowed values are: `resourceLocation`, `resourceType`, `resourceWithoutLocation`. `resourceWithoutLocation` cannot be used in the same resource selector as `resourceLocation`.

Optional:

- `in` (Set of String) The list of values that the selector will match. The values are the policy definition reference ids. Conflicts with `in`.
- `not_in` (Set of String) The list of values that the selector will not match. The values are the policy definition reference ids. Conflicts with `in`.




<a id="nestedatt--alz_policy_role_assignments"></a>
### Nested Schema for `alz_policy_role_assignments`

Read-Only:

- `assignment_name` (String) The name of the policy assignment.
- `role_definition_id` (String) The role definition id to assign with the policy assignment.
- `scope` (String) The scope to assign with the policy assignment.
