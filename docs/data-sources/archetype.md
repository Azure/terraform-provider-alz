---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "alz_archetype Data Source - terraform-provider-alz"
subcategory: ""
description: |-
  Archetype data source. This provides data in order to create resources. Where possible, the data is provided in the form of ARM JSON.
---

# alz_archetype (Data Source)

Archetype data source. This provides data in order to create resources. Where possible, the data is provided in the form of ARM JSON.

## Example Usage

```terraform
data "azurerm_client_config" "current" {}

data "alz_archetype" "example" {
  defaults = {
    location = "westeurope"
  }
  id                        = "alz-root"
  base_archetype            = "root"
  display_name              = "alz-root"
  parent_id                 = data.azurerm_client_config.current.tenant_id
  policy_definitions_to_add = ["MyPolicyDefinition"]
  policy_assignments_to_add = ["MyPolicyAssignment"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `base_archetype` (String) The base archetype name to use. This has been generated from the provider lib directories.
- `defaults` (Attributes) Archetype default values (see [below for nested schema](#nestedatt--defaults))
- `id` (String) The management group name, forming part of the resource id.
- `parent_id` (String) The parent management group name.

### Optional

- `display_name` (String) The display name of the management group.
- `policy_assignments_to_add` (Attributes Map) A map of policy assignments names to add to the archetype. The map key is the policy assignment name.You can also update existing policy assignments by using the same map key as an existing policy assignment name.The nested attributes will be merged with the existing policy assignment so you do not need to re-declare everything. (see [below for nested schema](#nestedatt--policy_assignments_to_add))
- `policy_assignments_to_remove` (Set of String) A list of policy assignment names to remove from the archetype.
- `policy_definitions_to_add` (Set of String) A list of policy definition names to add to the archetype.
- `policy_definitions_to_remove` (Set of String) A list of policy definition names to remove from the archetype.
- `policy_set_definitions_to_add` (Set of String) A list of policy set definition names to add to the archetype.
- `policy_set_definitions_to_remove` (Set of String) A list of policy set definition names to remove from the archetype.
- `role_definitions_to_add` (Set of String) A list of role definition names to add to the archetype.
- `role_definitions_to_remove` (Set of String) A list of role definition names to remove from the archetype.

### Read-Only

- `alz_policy_assignments` (Map of String) A map of generated policy assignments. The values are ARM JSON policy assignments.
- `alz_policy_definitions` (Map of String) A map of generated policy assignments. The values are ARM JSON policy definitions.
- `alz_policy_role_assignments` (Attributes Map) A map of role assignments generated from the policy assignments. The values are a nested object containing the role definition ids and any additionl scopes. (see [below for nested schema](#nestedatt--alz_policy_role_assignments))
- `alz_policy_set_definitions` (Map of String) A map of generated policy assignments. The values are ARM JSON policy set definitions.
- `alz_role_definitions` (Map of String) A map of generated role assignments. The values are ARM JSON role definitions.

<a id="nestedatt--defaults"></a>
### Nested Schema for `defaults`

Required:

- `location` (String) Default location

Optional:

- `log_analytics_workspace_id` (String) Default Log Analytics workspace id
- `private_dns_zone_resource_group_id` (String) Resource group resource id containing private DNS zones. Used in the Deploy-Private-DNS-Zones assignment.


<a id="nestedatt--policy_assignments_to_add"></a>
### Nested Schema for `policy_assignments_to_add`

Optional:

- `display_name` (String) The policy assignment display name.
- `enforcement_mode` (String) The enforcement mode of the policy assignment. Must be one of `Default`, or `DoNotEnforce`.
- `identity` (String) The identity type. Must be one of `SystemAssigned` or `UserAssigned`.
- `identity_ids` (Set of String) A list of identity ids to assign to the policy assignment. Required if `identity` is `UserAssigned`.
- `non_compliance_message` (Attributes Set) The non-compliance messages to use for the policy assignment. (see [below for nested schema](#nestedatt--policy_assignments_to_add--non_compliance_message))
- `parameters` (String) The parameters to use for the policy assignment. **Note:** This is a JSON string, and not a map. This is because the parameter values have different types, which confuses the type system used by the provider sdk. Use `jsonencode()` to construct the map. The map keys must be strings, the values are `any` type.

Example: `jsonencode({"param1": "value1", "param2": 2})`
- `policy_definition_id` (String) The resource id of the policy definition. Conflicts with `policy_definition_name` and `policy_set_definition_name`.
- `policy_definition_name` (String) The name of the policy definition to assign. Must be in the AlzLib, if not use `policy_definition_id` instead. Conflicts with `policy_definition_id` and `policy_set_definition_name`.
- `policy_set_definition_name` (String) The name of the policy set definition to assign. Must be in the AlzLib, if not use `policy_definition_id` instead. Conflicts with `policy_definition_id` and `policy_definition_name`.

<a id="nestedatt--policy_assignments_to_add--non_compliance_message"></a>
### Nested Schema for `policy_assignments_to_add.non_compliance_message`

Required:

- `message` (String) The non-compliance message.

Optional:

- `policy_definition_reference_id` (String) The policy definition reference id (not the resource id) to use for the non compliance message. This references the definition within the policy set.



<a id="nestedatt--alz_policy_role_assignments"></a>
### Nested Schema for `alz_policy_role_assignments`

Read-Only:

- `assignment_name` (String) The name of the policy assignment.
- `role_definition_id` (String) The role definition id to assign with the policy assignment.
- `scope` (String) The scope to assign with the policy assignment.
