---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "alz_architecture Data Source - terraform-provider-alz"
subcategory: ""
description: |-
  The architecture data source provides the information required to deploy an ALZ management group hierarchy, including policy and additional role assignment detail.
---

# alz_architecture (Data Source)

The architecture data source provides the information required to deploy an ALZ management group hierarchy, including policy and additional role assignment detail.

## Example Usage

```terraform
data "azurerm_client_config" "example" {}

data "alz_architecture" "example" {
  name                     = "alz"
  root_management_group_id = azurerm_client_config.example.tenant_id
  location                 = "westus2"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `location` (String) The Azure region used as a default for resources.
- `name` (String) The name of the architecture to deploy.
- `root_management_group_id` (String) The root management group id under which to deploy the architecture.

### Optional

- `policy_assignments_to_modify` (Attributes Map) A mested map of policy assignments to modify. The key is the management group id, and the value is an object with a single attribute, `policy_assignments`. This is another map. (see [below for nested schema](#nestedatt--policy_assignments_to_modify))
- `policy_role_assignments` (Attributes Set) A set of role assignments that need to be created for the policies that have been assigned in the hierarchy. Since we will likely be using system assigned identities, we don't know the principal ID until after the deployment. Therefore this data can be used to create the role assignments after the deployment. (see [below for nested schema](#nestedatt--policy_role_assignments))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) A computed value representing the unique identifier for the architecture. Mandatory for acceptance testing.
- `management_groups` (Attributes List) This is a list of objects pertaining to the tier of management groups to be deployed (relative to the supplied root management group id). Use the `level` attribute to specify the tier of management groups to deploy. (see [below for nested schema](#nestedatt--management_groups))

<a id="nestedatt--policy_assignments_to_modify"></a>
### Nested Schema for `policy_assignments_to_modify`

Optional:

- `policy_assignments` (Attributes Map) A map of policy assignments to modify. The key is the policy assignment name, and the value is an object containing the modifications to make. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--policy_assignments))

<a id="nestedatt--policy_assignments_to_modify--policy_assignments"></a>
### Nested Schema for `policy_assignments_to_modify.policy_assignments`

Optional:

- `enforcement_mode` (String) The enforcement mode for the policy assignment. Valid values are `Default` and `DoNotEnforce`.
- `identity` (String) The identity type. Must be one of `SystemAssigned` or `UserAssigned`.
- `identity_ids` (Set of String) A set of zero or one identity ids to assign to the policy assignment. Required if `identity` is `UserAssigned`. **Do not** pass in computed values, instead construct the resource id yourself.
- `non_compliance_messages` (Attributes Set) The non-compliance messages to use for the policy assignment. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--policy_assignments--non_compliance_messages))
- `overrides` (Attributes List) The overrides for this policy assignment. There are a maximum of 10 overrides allowed per assignment. If specified here the overrides will replace the existing overrides. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--policy_assignments--overrides))
- `parameters` (String) The parameters to use for the policy assignment. **Note:** This is a JSON string, and not a map. This is because the parameter values have different types, which confuses the type system used by the provider sdk. Use `jsonencode()` to construct the map. The map keys must be strings, the values are `any` type. Example: `jsonencode({"param1": "value1", "param2": 2})`
- `resource_selectors` (Attributes List) The resource selectors to use for the policy assignment. A maximum of 10 resource selectors are allowed per assignment. If specified here the resource selectors will replace any existing resource selectors. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--policy_assignments--resource_selectors))

<a id="nestedatt--policy_assignments_to_modify--policy_assignments--non_compliance_messages"></a>
### Nested Schema for `policy_assignments_to_modify.policy_assignments.non_compliance_messages`

Required:

- `message` (String) The non-compliance message to use for the policy assignment.

Optional:

- `policy_definition_reference_id` (String) The policy definition reference id (not the resource id) to use for the non compliance message. This references the definition within the policy set.


<a id="nestedatt--policy_assignments_to_modify--policy_assignments--overrides"></a>
### Nested Schema for `policy_assignments_to_modify.policy_assignments.overrides`

Required:

- `kind` (String) The property the assignment will override. The supported kind is `policyEffect`.
- `value` (String) The new value which will override the existing value. The supported values are: `addToNetworkGroup`, `append`, `audit`, `auditIfNotExists`, `deny`, `denyAction`, `deployIfNotExists`, `disabled`, `manual`, `modify`, `mutate`. <https://learn.microsoft.com/azure/governance/policy/concepts/effects>

Optional:

- `override_selectors` (Attributes List) The selectors to use for the override. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--policy_assignments--overrides--override_selectors))

<a id="nestedatt--policy_assignments_to_modify--policy_assignments--overrides--override_selectors"></a>
### Nested Schema for `policy_assignments_to_modify.policy_assignments.overrides.override_selectors`

Required:

- `kind` (String) The property of a selector that describes what characteristic will narrow down the scope of the override. Allowed value for kind: `policyEffect` is: `policyDefinitionReferenceId`.

Optional:

- `in` (Set of String) The list of values that the selector will match. Conflicts with `not_in`.
- `not_in` (Set of String) The list of values that the selector will not match. Conflicts with `in`.



<a id="nestedatt--policy_assignments_to_modify--policy_assignments--resource_selectors"></a>
### Nested Schema for `policy_assignments_to_modify.policy_assignments.resource_selectors`

Required:

- `name` (String) The name of the resource selector. The name must be unique within the assignment.

Optional:

- `resource_selector_selectors` (Attributes List) The selectors to use for the resource selector. (see [below for nested schema](#nestedatt--policy_assignments_to_modify--policy_assignments--resource_selectors--resource_selector_selectors))

<a id="nestedatt--policy_assignments_to_modify--policy_assignments--resource_selectors--resource_selector_selectors"></a>
### Nested Schema for `policy_assignments_to_modify.policy_assignments.resource_selectors.resource_selector_selectors`

Required:

- `kind` (String) The property of a selector that describes what characteristic will narrow down the set of evaluated resources. Each kind can only be used once in a single resource selector. Allowed values are: `resourceLocation`, `resourceType`, `resourceWithoutLocation`. `resourceWithoutLocation` cannot be used in the same resource selector as `resourceLocation`.

Optional:

- `in` (Set of String) The list of values that the selector will match. Conflicts with `not_in`.
- `not_in` (Set of String) The list of values that the selector will not match. Conflicts with `in`.





<a id="nestedatt--policy_role_assignments"></a>
### Nested Schema for `policy_role_assignments`

Read-Only:

- `management_group_id` (String) The id of the management group where the policy assignment will be created.
- `policy_assignment_name` (String) The name of the policy assignment to enable retrieval of the identity id.
- `role_definition_id` (String) The role definition id to assign.
- `scope` (String) The scope of the assignment.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--management_groups"></a>
### Nested Schema for `management_groups`

Optional:

- `display_name` (String) The display name of the management group.
- `policy_assignments` (Map of String) The policy assignments to apply to the management group. The key is the policy assignment name, and the value is the policy assignment JSON as a string.
- `policy_definitions` (Map of String) The policy definitions to apply to the management group. The key is the policy definition name, and the value is the policy definition JSON as a string.
- `policy_set_definitions` (Map of String) The policy set definitions to apply to the management group. The key is the policy set definition name, and the value is the policy set definition JSON as a string.
- `role_definitions` (Map of String) The role definitions to apply to the management group. The key is the role definition name, and the value is the role definition JSON as a string.

Read-Only:

- `exists` (Boolean) Whether the management group already exists or not. Used to determine if the management group should be created or just have policy/role resources created within.
- `id` (String) The id of the management group. This the last segment of the resource id.
- `level` (Number) The level of the management group in the hierarchy, relative to the supplied root management group. The level starts at zero.
- `parent_id` (String) The parent management group id.
