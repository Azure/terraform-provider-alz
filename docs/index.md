---
page_title: "Provider: ALZ"
subcategory: ""
description: |-
  Use the Azure Landing Zones (ALZ) provider to generate data to allow you to easily provision your ALZ configuration.
  You must configure the provider with the proper credentials before you can use it.

  This provider has been designed to work with the [ALZ Terraform module](https://registry.terraform.io/modules/Azure/avm-ptn-alz/azurerm/latest).
  We suggest that you consume this provider from within the module, rather than directly in your Terraform configuration.
---

# ALZ

Use the Azure Landing Zones (ALZ) provider to generate data to allow you to simplify provisioning of your ALZ configuration.
Its principal use is to generate data to deploy resources with the [AzApi](https://github.com/Azure/terraform-provider-azapi) provider.

Use the navigation to the left to read about the available resources.

~> **Important** This provider has been designed to work with the [ALZ Terraform module](https://registry.terraform.io/modules/Azure/avm-ptn-alz/azurerm/latest). We suggest that you consume this provider from within the module, rather than directly in your Terraform configuration.

~> **Important** Make sure to add `.alzlib` to your `.gitignore` file to avoid committing the downloaded ALZ library to your repository.

## Example Usage

```terraform
provider "alz" {
  library_references = [
    {
      path = "platform/alz"
      ref  = "2024.07.5"
    },
    {
      custom_url = "${path.root}/lib"
    }
  ]
}
```

## Authentication and Configuration

Configuration for the ALZ provider can be derived from several sources, which are applied in the following order:

1. Parameters in the provider configuration
1. Environment variables

## Versions

For production use, you should constrain the acceptable provider versions via configuration, to ensure that new versions with breaking changes will not be automatically installed by `terraform init` in the future:

```terraform
terraform {
  required_providers {
    alz = {
      source  = "azure/alz"
      version = "<version>" # change this to your desired version, https://www.terraform.io/language/expressions/version-constraints
    }
  }
}
```

As this provider is still at version zero, you should constrain the acceptable provider versions on the minor version.

## Azure Landing Zones Library

The provider will download the Azure Landing Zones Library from the [Azure Landing Zones Library GitHub repository](https://github.com/Azure/Azure-Landing-Zones-Library).
The asserts are in the `platform/alz` directory and are version tagged in order to provide a consistent experience.
Within the library are the following types of asserts:

- **policy definitions** - These are the policy definitions that are used to enforce the policies in the Azure Policy service.
- **policy assignments** - These are the policy assignments that are used to assign the policy definitions to the appropriate scope.
- **policy set definitions** - These are the policy set definitions that are used to group policy definitions together.
- **role definitions** - These are the role definitions that are used to define the roles in the Azure Role-Based Access Control (RBAC) service.
- **archetype definitions** - These group together the policy definitions, policy assignments, policy set definitions, and role definitions that and can be assigned to a management group.
- **archetype overrides** - These create new archetypes based off an existing archetype.
- **architecture definitions** - These files represent a deployed management group hierarchy, with the associated archetypes.

~> **Important** If the provider does not have access to download the library, please download separately and use the `library_references` to specify a local directory.

For more information please visit the [library documentation site](https://azure.github.io/Azure-Landing-Zones-Library/).

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `library_references` (Attributes List) A list of references to the [ALZ library](https://aka.ms/alz/library) to use. Each reference should either contain the `path` (e.g. `platform/alz`) and the `ref` (e.g. `2024.03.5`), or a `custom_url` to be supplied to go-getter. (see [below for nested schema](#nestedatt--library_references))

### Optional

- `auxiliary_tenant_ids` (List of String) List of auxiliary Tenant IDs required for multi-tenancy and cross-tenant scenarios. This can also be sourced from the `ARM_AUXILIARY_TENANT_IDS` Environment Variable.
- `client_certificate` (String) A base64-encoded PKCS#12 bundle to be used as the client certificate for authentication. This can also be sourced from the `ARM_CLIENT_CERTIFICATE` environment variable.
- `client_certificate_password` (String) The password associated with the Client Certificate. This can also be sourced from the `ARM_CLIENT_CERTIFICATE_PASSWORD` Environment Variable.
- `client_certificate_path` (String) The path to the Client Certificate associated with the Service Principal which should be used. This can also be sourced from the `ARM_CLIENT_CERTIFICATE_PATH` Environment Variable.
- `client_id` (String) The Client ID which should be used. This can also be sourced from the `ARM_CLIENT_ID`, `AZURE_CLIENT_ID` Environment Variable.
- `client_id_file_path` (String) The path to a file containing the Client ID which should be used. This can also be sourced from the `ARM_CLIENT_ID_FILE_PATH` Environment Variable.
- `client_secret` (String) The Client Secret which should be used. This can also be sourced from the `ARM_CLIENT_SECRET` Environment Variable.
- `client_secret_file_path` (String) The path to a file containing the Client Secret which should be used. For use When authenticating as a Service Principal using a Client Secret. This can also be sourced from the `ARM_CLIENT_SECRET_FILE_PATH` Environment Variable.
- `environment` (String) The Cloud Environment which should be used. Possible values are `public`, `usgovernment` and `china`. Defaults to `public`. This can also be sourced from the `ARM_ENVIRONMENT` or `AZURE_ENVIRONMENT` Environment Variables.
- `library_fetch_dependencies` (Boolean) Whether to automatically fetch dependencies for the library. This option reads the `alz_library_metadata.json` file in any supplied library and will recursively download dependent libraries. Default is `true`.
- `library_overwrite_enabled` (Boolean) Whether to allow overwriting of the library by other lib directories. Default is `false`.
- `oidc_azure_service_connection_id` (String) The Azure Pipelines Service Connection ID to use for authentication. This can also be sourced from the `ARM_ADO_PIPELINE_SERVICE_CONNECTION_ID`, `ARM_OIDC_AZURE_SERVICE_CONNECTION_ID`, or `AZURESUBSCRIPTION_SERVICE_CONNECTION_ID` Environment Variables.
- `oidc_request_token` (String) The bearer token for the request to the OIDC provider. This can also be sourced from the `ARM_OIDC_REQUEST_TOKEN`, `ACTIONS_ID_TOKEN_REQUEST_TOKEN`, or `SYSTEM_ACCESSTOKEN` Environment Variables.
- `oidc_request_url` (String) The URL for the OIDC provider from which to request an ID token. This can also be sourced from the `ARM_OIDC_REQUEST_URL`, `ACTIONS_ID_TOKEN_REQUEST_URL`, or `SYSTEM_OIDCREQUESTURI` Environment Variables.
- `oidc_token` (String) The ID token when authenticating using OpenID Connect (OIDC). This can also be sourced from the `ARM_OIDC_TOKEN` environment Variable.
- `oidc_token_file_path` (String) The path to a file containing an ID token when authenticating using OpenID Connect (OIDC). This can also be sourced from the `ARM_OIDC_TOKEN_FILE_PATH`, `AZURE_FEDERATED_TOKEN_FILE` environment Variable.
- `role_definitions_use_supplied_names_enabled` (Boolean) Whether to allow using the Name and RoleName supplied in the library directly for a predictable ID. Default behaviour is to update them to unique values per management group. Default is `false`.
- `skip_provider_registration` (Boolean) Should the provider skip registering all of the resource providers that it supports, if they're not already registered? Default is `false`. If not specified, value will be attempted to be read from the `ARM_SKIP_PROVIDER_REGISTRATION` environment variable.
- `subscription_id` (String) The Subscription ID which should be used. This can also be sourced from the `ARM_SUBSCRIPTION_ID` Environment Variable.
- `suppress_warning_policy_role_assignments` (Boolean) Should the provider omit the warning if it cannot create the full list of policy role assignments? Default is `false`. If not specified, value will be attempted to be read from the `ALZ_PROVIDER_SUPPRESS_WARNING_POLICY_ROLE_ASSIGNMENTS` environment variable.
- `tenant_id` (String) The Tenant ID should be used. This can also be sourced from the `ARM_TENANT_ID` Environment Variable.
- `use_aks_workload_identity` (Boolean) Should AKS Workload Identity be used for Authentication? This can also be sourced from the `ARM_USE_AKS_WORKLOAD_IDENTITY` Environment Variable. Defaults to `false`. When set, `client_id`, `tenant_id` and `oidc_token_file_path` will be detected from the environment and do not need to be specified.
- `use_cli` (Boolean) Should Azure CLI be used for authentication? This can also be sourced from the `ARM_USE_CLI` environment variable. Defaults to `true`.
- `use_msi` (Boolean) Should Managed Identity be used for Authentication? This can also be sourced from the `ARM_USE_MSI` Environment Variable. Defaults to `false`.
- `use_oidc` (Boolean) Should OIDC be used for Authentication? This can also be sourced from the `ARM_USE_OIDC` Environment Variable. Defaults to `false`.

<a id="nestedatt--library_references"></a>
### Nested Schema for `library_references`

Optional:

- `custom_url` (String, Sensitive) A custom path/URL to the library to use. Conflicts with `path` and `ref`. For supported protocols, see [go-getter](https://pkg.go.dev/github.com/hashicorp/go-getter/v2). Value is marked sensitive as may contain secrets.
- `path` (String) The path in the ALZ Library, e.g. `platform/alz`. Also requires `ref`. Conflicts with `custom_url`.
- `ref` (String) This is the version of the library to use, e.g. `2024.07.5`. Also requires `path`. Conflicts with `custom_url`.
